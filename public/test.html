<script src="bower_components/jquery/dist/jquery.min.js"></script>
<script src="bower_components/highcharts/highcharts.js"></script>
<script src="bower_components/highcharts/modules/exporting.js"></script>

<div id="container" style="min-width: 310px; height: 400px; margin: 0 auto"></div>

<script>

$(document).ready(function(){
	showGraph();
});


function showGraph() {
	var options = {
        chart: {
            type: 'line',
			renderTo: 'container'
        },
        title: {
            text: 'Monthly Average Temperature'
        },
        subtitle: {
            text: 'Source: WorldClimate.com'
        },
        xAxis: {
            //categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
        },
        yAxis: {
            title: {
                text: 'Temperature (Â°C)'
            }
        },
        plotOptions: {
            line: {
                dataLabels: {
                    enabled: true
                },
                enableMouseTracking: false
            }
        },
		series: [{}]
	};

	
	$.ajax({
                dataType: 'json',
                url: location.protocol + '//' + location.host + '/service1',
                cache: false,
                success: function (response)
                {
                    var xax = [];
                    var yax = [];
                    var ids = [];
                    for (var i = 0; i < response.length; i++)
                    {
                        xax.push(response[i]['time_stamp']);
                        yax.push(parseFloat(response[i]['temp_1']));
                        ids.push(parseFloat(response[i]['Id']));
                    }
                    console.log(response);
                    options.title.text = 'Impianti';
                    options.xAxis.categories = xax;
                    options.series[0].data = yax;
                    options.id = ids;
                    options.series[0].name = "Temperatura";
                    var chart = new Highcharts.Chart(options);
                },
                error: function (response)
                {
                    alert("There was an error loading the make and model data.");
                }
            });

} // end function

</script>

